<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head data-vp="http://{{host}}/portalProject/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>素材中心</title> 

     <link href="css/base.css" rel="stylesheet" />
     <link href="css/profession.css" rel="stylesheet" />
     <link href="css/yui.css" rel="stylesheet" />
	 <style>
	 	.header-logo{height:100px;}
		.header-logo img{width:100px;vertical-align: middle;}
		.header-inner h2{width: 500px;}
	 </style>
   </head>
<body style="background-color: #fff;">
    <div class="header">
        <div class="header-inner clefix">
            <span class="header-logo" id="logo">
                <img src="/portalProject/themes/sta_page/img/no_thumbnail.jpg" width="353" height="100">
                <h2></h2>
            </span>
            <div class="login-wrapper">
                <div class="login-inner">
                    <a href="/portal" class="login-link" id="login-btn">返回首页</a>
                </div>
            </div>
            <div class="header-nav">
               <ul class="nav-group">
                    <li class="nav-i"><a href="index.html" class="nav-link">专业首页</a>
                    </li>
                    <li class="nav-i"><a href="major_garden.html" class="nav-link">专业园地</a>
                    </li>
                    <li class="nav-i"><a href="course.html" class="nav-link">课程中心</a>
                    </li>
                    <li class="nav-i"><a href="smallcourse.html" class="nav-link">微课中心</a>
                    </li>                 
                     <li class="nav-i"><a href="material.html" class="nav-link current">素材中心</a>
                    </li>
                    <li class="nav-i"><a href="industry_resources.html" class="nav-link">行业资源</a>
                    </li>
                    <li class="nav-i"><a href="corporate_training.html" class="nav-link">企业培训</a>
                    </li>
                    <li class="nav-i"><a href="skill_textual_research.html" class="nav-link">技能考证</a>
                    </li>
                    <li class="nav-i"><a href="yidaiyilu.html" class="nav-link">"一带一路"</a>
                    </li>
                    </li>
                    <li class="nav-i"><a href="practical_training_base.html" class="nav-link">实训基地</a>
                    </li>
                    <li class="nav-i"><a href="skill_practice.html" class="nav-link">技能训练</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="wrapper">
        <div class="wrapper-inner">
            <div class="yui3-g">
                <input type="hidden" name="projectId" value="aivsajiksyzeowheqq7edq" />
                <input type="hidden" class="serach" name="array_course" />
                <input type="hidden" class="serach" name="array_media" />
                <input type="hidden" class="serach" name="array_application" />
                <input type="hidden" name="page" value="1" />
                <input type="hidden" name="orders" />
                <input type="hidden" name="docname" />
                <div class=" yui3-u-1">
                    <div class="res-inner">
                        <div class="m-tag" id="search_menu">
                            <div class="m-select clefix">
                                <div class="a-key"><strong>素材筛选：</strong></div>
                                <div class="a-val">
                                    <ul class="clefix" id="Screening">
                                    </ul>
                                </div>
                            </div>
                            <div class="attr">
                                <div class="m-attr clefix">
                                    <div class="a-key"><strong>所属课程：</strong></div>
                                    <div class="a-val" id="course_html">
                                        <span class="course_search"><a href="#" class="current" type="call">全部</a></span>
                                    </div>
                                </div>
                                <div class="m-attr clefix">
                                    <div class="a-key"><strong>媒体类型：</strong></div>
                                    <div class="a-val" id="media_html">
                                        <span class="media"><a href="#" class="current" type="mAll">全部</a></span>
                                    </div>
                                </div>
                                <div class="m-attr bor-none clefix">
                                    <div class="a-key"><strong>应用类型：</strong></div>
                                    <div class="a-val" id="apptype_html">
                                        <span class="application"><a href="#" class="current" type="aall">全部</a></span>
                                    </div>
                                </div>
                            </div> 

                            <div class="attr-bar clefix">
                                <div class="search-tips">找到 <span class="materialCount"></span>个素材</div>
                                <div class="attr-list clefix" id="aorder">
                                    <div class="attr-order">
                                        <a href="#" class="current default"><span>默认排序</span></a>
                                        <a href="#" class="orders" data-value="CreateTime"><span>发布时间</span></a>
                                        <a href="#" class="orders" data-value="ViewCount"><span>热度</span></a>
                                        <a href="#" class="orders" data-value="Size"><span>大小</span></a>
                                    </div>
                                    <div class="attr-search clefix">
                                        <input type="text" class="search" name="materiaName" value="" placeholder="按照素材名称查找"/>
                                        <button type="submit" class="button-submit submitsure" style="cursor:pointer"></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="res-list">
                            <ul class="clefix" id="material_html">
                            </ul>
                        </div>

                        <div class="paging">
                            <div class="pagination" id="pagination">
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-inner">
            <div class="footer-left" id="footerLeft">
            </div>
            <div class="footer-right">
                <h3 class="footer-logo">&nbsp;</h3>
                <div class="footer-text">
                    <p>
                        <a href='/portal/platform?page=1' target="_blank">平台简介</a>&nbsp;|&nbsp;
         
                        <a href='/portal/platform?page=2' target="_blank">知识产权</a>&nbsp;|&nbsp;
         
                        <a href='/portal/platform?page=3' target="_blank">免责声明</a>&nbsp;|&nbsp;
         
                        <a href='/portal/platform?page=4' target="_blank">意见反馈</a>&nbsp;|&nbsp;
         
                        <a href='/portal/platform?page=5' target="_blank">联系我们</a>
                    </p>
                </div>

            </div>
            <div class="footer-copyright" style="padding-left: 100px;">
                <span>Copyright©www.icve.com.cn</span>
                <a href="http://www.miitbeian.gov.cn/" class="copyright-ICP">京ICP备12020869-19</a>
            </div>
        </div>
    </div>

    <script id="media" type="text/html">
        <! for(var i = 0; i < media.length; i++) { !>
             <span class="media"><a href="javascript:;" data-id="<!=media[i].id!>" title="<!=media[i].name!>"><!=media[i].name!></a></span>
        <! } !> 
    </script>

    <script id="application" type="text/html">
        	<!if(application==null){!>
	  暂无应用类型
	<!}else{!>
        <! for(var i = 0; i < application.length; i++) { !>
             <span class="application"><a href="javascript:;" data-id="<!=application[i].id!>" title="<!=application[i].name!>"><!=application[i].name!></a></span>
        <! } !> 
        <!}!>
    </script>

    <script id="course" type="text/html">
        <! for(var i = 0; i < course.length; i++) { !>
             <span class="course_search"><a href="#" data-id="<!=course[i].id!>" title="<!=course[i].name!>"><!=course[i].name!></a></span>
        <! } !> 
    </script>

    <script id="material_table" type="text/html">
        <! for(var i = 0; i < material.length; i++) { !>
              <li>
                  <div class="thumb">
                      <a href="/portal/manage-sourcematerialofindex-editmaterial?docid=<!=material[i].id!>" target="_blank">
                          <img src="<!=material[i].file!>" width="220" height="165" alt=""></a>
                  </div>
                  <!if(material[i].DocTitle.length>10){!>
                  <div class="res-title"><a href="/portal/manage-sourcematerialofindex-editmaterial?docid=<!=material[i].id!>" target="_blank" title="<!=material[i].DocTitle!>.<!=material[i].Extension!>"><!=material[i].DocTitle!>.<!=material[i].Extension!></a></div>
                  <!}else{!>
                  <div class="res-title"><a href="/portal/manage-sourcematerialofindex-editmaterial?docid=<!=material[i].id!>" target="_blank" title="<!=material[i].DocTitle!>.<!=material[i].Extension!>"><!=material[i].DocTitle!>.<!=material[i].Extension!></a></div>
                  <!}!>
                  <div class="res-info">文件大小：<!=material[i].newSize!> </div>
                  <div class="res-info"><!=material[i].BeforeTime!></div>
                  <div class="res-info">
                      <span><strong><!=material[i].ViewCount!></strong>浏览&nbsp;/&nbsp;</span>
                      <span><strong><!=material[i].CommentCount!></strong>评论&nbsp;/&nbsp;</span>
                  </div>
              </li>
        <! } !> 
    </script>

   <script id="page_html" type="text/html">
        <!if(totalPageCount>1){!>
        <!if(pageCurrent!=1){!>
         <a href="?page=<!=pageCurrent-1!>" data-page="<!=pageCurrent-1!>" title="上一页" class="prev">上一页</a>
        <! } !> 
          <!if(totalPageCount<8){!>
             <! for(var i = 1; i <totalPageCount+1; i++) { !>
              <!if(pageCurrent==i){!>
               <a href="?page=<!=i!>" data-page="<!=i!>" class="current"><!=i!></a>
              <!}else{!>
               <a href="?page=<!=i!>" data-page="<!=i!>"><!=i!></a>
              <! } !> 
             <! } !> 
			
        <!}else{!>
		    <!if(pageCurrent<5){!>
		     <! for(var i = 1; i <7; i++){ !>
              <!if(pageCurrent==i){!>
               <a href="?page=<!=i!>" data-page="<!=i!>" class="current"><!=i!></a>
              <!}else{!>
               <a href="?page=<!=i!>" data-page="<!=i!>"><!=i!></a>
              <! } !> 
             <! } !> 
			 <span><!='\.\.\.'!></span>
			 <a href="?page=<!=totalPageCount!>" data-page="<!=totalPageCount!>"><!=totalPageCount!></a>
			<!}else if(pageCurrent>totalPageCount-4){!>
			  <a href="?page=<!=1!>" data-page="<!=1!>"><!=1!></a>
              <span><!='\.\.\.'!></span>
			  <! for(var i = pageCurrent-2; i <totalPageCount; i++){ !>
              <!if(pageCurrent==i){!>
               <a href="?page=<!=i!>" data-page="<!=i!>" class="current"><!=i!></a>
              <!}else{!>
               <a href="?page=<!=i!>" data-page="<!=i!>"><!=i!></a>
              <! } !> 
             <! } !> 
			   <!if(pageCurrent==totalPageCount){!>
               <a href="?page=<!=totalPageCount!>" data-page="<!=totalPageCount!>" class="current"><!=totalPageCount!></a>
              <!}else{!>
               <a href="?page=<!=totalPageCount!>" data-page="<!=totalPageCount!>"><!=totalPageCount!></a>
              <! } !> 
			<!}else{!>
			  <!if(pageCurrent==1){!>
               <a href="?page=<!=1!>" data-page="<!=1!>" class="current"><!=1!></a>
              <!}else{!>
               <a href="?page=<!=1!>" data-page="<!=1!>"><!=1!></a>
              <! } !> 
			   <span><!='\.\.\.'!></span>
			    <! for(var i = pageCurrent-2; i <pageCurrent+3; i++){ !>
              <!if(pageCurrent==i){!>
               <a href="?page=<!=i!>" data-page="<!=i!>" class="current"><!=i!></a>
              <!}else{!>
               <a href="?page=<!=i!>" data-page="<!=i!>"><!=i!></a>
              <! } !> 
             <! } !> 
			 <span><!='\.\.\.'!></span>
			 <a href="?page=<!=totalPageCount!>" data-page="<!=totalPageCount!>"><!=totalPageCount!></a>
			 
			<! } !> 
		  
		
		<! } !> 
        
         <!if(pageCurrent!=totalPageCount){!>
          <a href="?page=<!=pageCurrent+1!>" data-page="<!=pageCurrent+1!>" title="下一页" class="next">下一页</a>
        <! } !> 
    <! } !> 
    </script>

    <script id="link_html" type="text/html">
        <! for(var i = 0; i < link.length; i++) { !>
             <a href="<!=link[i].url!>" target="_blank"><!=link[i].name!></a>
        <! } !> 
    </script>
  <script src="/portalProject/js/common/jquery.js"></script>
   <script src="/portalProject/js/interface/Sub_Project_Interface.js"></script>
   <script src="/portalProject/js/interface/Sub_Project_Index.js"></script>
   <script src="/portalProject/js/interface/BaiduTemplate.js"></script>
    <script src="js/material.js"></script>
    <script type="text/javascript">
        var Get_Table = {};
        $(document).ready(function () {
            $('input[name=projectId]').val(jQuery.query.get(projectId).projectId);
            //使用baidu.template命名空间
            var bt = baidu.template;
			
            //可以设置分隔符
            bt.LEFT_DELIMITER = '<!';
            bt.RIGHT_DELIMITER = '!>';

            //可以设置输出变量是否自动HTML转义
            //bt.ESCAPE = false;

            //专业Id
            var projectId = $('input[name=projectId]').val();
			
            //分页page
            var page = $('input[name=page]').val();
			
            //媒体类型数据  start
            var get_media = sub_project.get_media();
            var media = {
                media: get_media
            }
			
            var media_html = bt('media', media);
            $('#media_html').append(media_html);
            //end
			
            //应用类型数据 start
            var get_application = sub_project.get_application(projectId);
            var application = {
                application: get_application
            }
			
            //获取logo  start
            var logos = sub_project.getLogo(projectId);
            var projectname=logos.projectName+"专业教学资源库";
            $("#logo img").attr("src", logos.logoUrl);
            $("#logo h2").attr("title",logos.projectName);
            $("#logo h2").text(projectname);
            //end

            var applocation_html = bt('application', application);
            $("#apptype_html").append(applocation_html);
            //end
			
            //所属课程数据 start
            var get_course = sub_project.get_course(projectId);
            var course = {
                course: get_course
            }
            var course_html = bt('course', course);
            $("#course_html").append(course_html);
            //end
																										
            var name = sub_project.get_knowledgeNode("", projectId);
			
            Get_Table.getMaterialList = function (datas) {
                if (datas == null) {
                    var data = {
                        projectId: projectId,
                        page: page,
                        pagesize: 8,
                        hot: true
                    }
                } else { data = datas; }

                var get_material = sub_project.material(data);
                console.log(get_material);
                var material = {
                    material: get_material.material.obj
                }
                var material_html = bt('material_table', material);
                document.getElementById("material_html").innerHTML = material_html
                //end

                //分页数据
                var pagination = {
                    pageCurrent: parseInt(get_material.pageCurrent),
                    totalPageCount: get_material.totalPageCount
                }

                //绑定所属分页
                var page_html = bt('page_html', pagination);
                document.getElementById('pagination').innerHTML = page_html;//渲染
                $(".materialCount").text(get_material.materialCount);
                $("input[name=materiaName]").val()
            }


            //友情链接
            var get_friendLink = sub_project.get_footer(projectId).data;
            var link = {
                link: get_friendLink
            }
            var link_htmls = bt('link_html', link);
            document.getElementById('footerLeft').innerHTML = link_htmls;//渲染

            //绑定分页
            $('.pagination').on('click', 'a', function (e) {
                e.preventDefault();
                page = $(this).attr("data-page");
                $('.pagination a').removeClass('current');
                $(this).addClass('current');
				
                //加其他参数
                var paginationData = {
                    projectId: projectId,
                    pagesize: 8,
                    array_course: $("input[name=array_course]").val(),
                    array_media: $("input[name=array_media]").val(),
                    array_application: $("input[name=array_application]").val(),
                    orders: $('input[name=orders]').val(),
                    page: page,
                    hot: true

                }
                Get_Table.getMaterialList(paginationData);
                return false;
            });

            Get_Table.getMaterialList();//加载页面

        });


        //素材列表页媒体、应用、所属课程查询数据
        var Click = function () {
            var data = {
                projectId: $('input[name=projectId]').val(),
                pagesize: 8,
                docname: $("input[name=docname]").val(),
                orders: $("input[name=orders]").val(),
                array_course: $("input[name=array_course]").val(),
                array_media: $("input[name=array_media]").val(),
                array_application: $("input[name=array_application]").val(),
                page: $('input[name=page]').val()
            }
            console.log(data);
            Get_Table.getMaterialList(data);
            return false;
        }
        //end
    </script>
</body>
</html>
